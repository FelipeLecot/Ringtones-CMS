let loadRingtones=(t,e="")=>{$.ajax({url:"https://do2indie.com/Play/Ringtones/getRingtones.php",data:{id:e,latest:t,order:$(".select-order").val(),search:$(".search-bar").val(),cat:$(".select-cat").val()},method:"GET",success:function(t){let n=JSON.parse(t);""==e?displayRingtoneItems(n.list):displaySingleRingtone(n.list[0])},error:function(t){toast.alert(`Cannot load ringtones. (${t})`)}})};function displayRingtoneItems(t){t.forEach(t=>{let e=JSON.parse(t);e.id!=url.searchParams.get("r")&&$(".ringtone-container").append(`\n                <div class="col-md-6 col-lg-4 col-xl-4 ringtone-item">\n                    <div>\n                        <div class="audio-cont-top">\n                            <div id="${e.id}" class="play-audio"><i class="fa fa-play-circle fa-3x color-main"></i></div>\n                            <h1 id="${e.id}" class="audio-heading color-main">${e.h}</h1>\n                        </div>\n                        <div class="audio-cont-middle">\n                            <p class="audio-tag">${e.t[0]}</p>\n                            <p class="audio-tag">${e.t[1]}</p>\n                            <p class="audio-tag">${e.t[2]}</p>\n                        </div>\n                        <div class="audio-cont-other">\n                            <button idVal="${e.id}" class="btn like-button" type="button">\n                                <i class="fa fa-heart"></i><span class="ringtone-data">${e.likes}</span>\n                            </button>\n                            <a href="/media/${e.h}.mp3" idVal="${e.id}" download="${e.h}.mp3" class="btn download-button">Download<span class="ringtone-data">${e.downloads}</span></a>\n                        </div>\n                    </div>\n                </div>\n            `)}),addEventListenerToPlayButton(),addEventListenerToAddButton(),addEventListenerToTags(),addEventListenerToHeading()}function displaySingleRingtone(t){let e=JSON.parse(t);$(document).attr("title",e.h),$(".ringtone-single").append(`\n        <div class="ringtone-item single-ringtone">\n            <div>\n                <div class="audio-cont-top">\n                    <div id="${e.id}" class="play-audio"><i class="fa fa-play-circle fa-3x color-main"></i></div>\n                    <h1 id="${e.id}" class="audio-heading color-main">${e.h}</h1>\n                </div>\n                <div class="audio-cont-middle">\n                    <p class="audio-tag">${e.t[0]}</p>\n                    <p class="audio-tag">${e.t[1]}</p>\n                    <p class="audio-tag">${e.t[2]}</p>\n                </div>\n                <div class="audio-cont-other">\n                    <button idVal="${e.id}" class="btn like-button" type="button">\n                        <i class="fa fa-heart"></i><span class="ringtone-data">${e.likes}</span>\n                    </button>\n                    <a href="/media/${e.h}.mp3" idVal="${e.id}" download="${e.h}.mp3" class="btn download-button">Download<span class="ringtone-data">${e.downloads}</span></a>\n                </div>\n            </div>\n        </div>\n    `),$(".ringtone-options").append(`\n        <div class="ringtone-share">\n            <h1 class="text-main text-center w-100">Share this ringtone!</h1>\n            <a class="share-link w-100 text-center" href="https://twitter.com/share?text=Check out this ringtone!8&amp;url=${window.location.href}&amp;hashtags=ringtone,song,sound" target="_blank"><i class="fa fa-twitter"></i> Twitter</a>\n            <a class="share-link w-100 text-center" href="https://www.facebook.com/sharer/sharer.php?u=${window.location.href}&amp;title=Check&amp;nbspout&amp;nbspthis&amp;nbspcool&amp;nbspringtone!" target="_blank"><i class="fa fa-facebook-square"></i> Facebook</a>\n            <a class="share-link w-100 text-center" href="https://api.whatsapp.com/send?text=Check out this cool ringtone! ${window.location.href}" data-action="share/whatsapp/share" target="_blank"><i class="fa fa-whatsapp"></i> WhatsApp</a>\n        </div>\n    `)}function addEventListenerToHeading(){$(".audio-heading").on("click",(function(){window.location.href=window.location.origin+"?r="+$(this).attr("id")}))}function addEventListenerToTags(){$(".audio-tag").on("click",(function(){window.location.href=window.location.origin+"?s="+$(this).text()}))}function addEventListenerToPlayButton(){$(".play-audio").on("click",(function(){$(this).children("i").removeClass("fa-play-circle").addClass("fa-pause-circle");let t=new Audio(`/media/${$(this).attr("id")}.mp3`);t.play(),$(this).off().on("click",(function(){$(this).children("i").removeClass("fa-pause-circle").addClass("fa-play-circle"),t.pause(),t.currentTime=0,addEventListenerToPlayButton()}))}))}function addEventListenerToAddButton(){$(".like-button").on("click",(function(){t($(this).attr("idVal"),"likes"),$(this).css("color","red").off()})),$(".download-button").on("click",(function(){t($(this).attr("idVal"),"downloads"),$(this).off()}));let t=(t,e)=>{$.ajax({url:"https://do2indie.com/Play/Ringtones/addValueToRingtone.php",data:{id:t,type:e},method:"POST",success:function(n){"likes"==e?(toast.success("You liked that ringtone!"),$(`.like-button[idVal=${t}] span`).text(parseInt($(`.like-button[idVal=${t}] span`).text())+1)):(toast.success("You downloaded that ringtone!"),$(`.download-button[idVal=${t}] span`).text(parseInt($(`.download-button[idVal=${t}] span`).text())+1))},error:function(t){toast.alert("Could not complete that action.")}})}}$(".load-container").on("click",(function(){loadRingtones($(".ringtone-item:last").attr("id"))})),$(".select-order, .select-cat").on("change",(function(){$("#upload-content").remove(),$(".load-container").removeClass("d-none"),$(".ringtone-container").html(""),loadRingtones(0)}));let url=new URL(window.location);""!=url.searchParams.get("s")&&null!=url.searchParams.get("s")&&$(".search-bar").val(url.searchParams.get("s")),""!=url.searchParams.get("r")&&null!=url.searchParams.get("r")&&(loadRingtones(0,url.searchParams.get("r")),$("#upload-content").remove(),$(".load-container").addClass("d-none")),loadRingtones(0),$("#upload-button").on("click",(function(){$("#upload-content").remove(),$(".load-container").addClass("d-none"),$(".ringtone-container").html(""),$(".ringtone-single-cont").html('<div class="ringtone-single"></div><div class="ringtone-options"></div>'),$("body").append('<form id="upload-content" class="p-4 d-flex justify-content-center flex-wrap cont-upload align-content-center">\n            <h1 class="text-main w-100 text-center">Upload your ringtone</h1>\n            <div class="text-center">\n                <label id="user_group_label" class="form-label" for="user_group_logo"><i class="fas fa-upload"></i> Choose an audio...</label>\n            </div>\n            <div class="w-100 d-flex justify-content-sm-evenly flex-wrap">\n                <input id="heading" class="form-control w-40 upload-ringtone m-30 color-main" type="text" placeholder="Title"/>\n                <input id="tags" class="form-control m-30 w-40 upload-ringtone color-main" type="text" placeholder="Tags (3 max)"/>\n            </div>\n            <div style="width: 200px;"><input id="user_group_logo" class="form-control custom-file-input d-none" type="file" accept="audio/mp3" name="file"/>\n                <div class="text-center mt-2">\n                    <button class="btn btn-primary upload-button" type="submit">Upload</button>\n                </div>\n            </div>\n        </form>');var t=document.getElementById("user_group_logo");t.onchange=function(e){var n=t.value;if(n){var a=n.indexOf("\\")>=0?n.lastIndexOf("\\"):n.lastIndexOf("/"),o=n.substring(a);0!==o.indexOf("\\")&&0!==o.indexOf("/")||(o=o.substring(1)),$("#user_group_label").text(o)}},$("#upload-content").submit((function(t){t.preventDefault();let e=new FormData(document.getElementById("upload-content")),n=`{"data":{"h": "${$("#heading").val()}", "t": ["${$("#tags").val().split(" ")[0]}", "${$("#tags").val().split(" ")[1]}", "${$("#tags").val().split(" ")[2]}"]}}`;e.append("data",n),$.ajax({url:"https://do2indie.com/Play/Ringtones/pushRingtones.php",method:"POST",data:e,success:function(t){toast.success("Ringtone uploaded successfully."),$(this).remove(),$(".load-container").toggleClass("d-none"),$(".ringtone-container").html(""),loadRingtones(0)},error:function(t){toast.alert("Could not upload the ringtone. "+t)},cache:!1,contentType:!1,processData:!1})}))}));"use strict";var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var siiimpleToast=function(){function t(e){if(_classCallCheck(this,t),e||(e={vertical:"bottom",horizontal:"right"}),!e.vertical)throw new Error('Please set parameter "vertical" ex) bottom, top ');if(!e.horizontal)throw new Error('Please set parameter "horizontal" ex) left, center, right ');this._settings=e,this.defaultClass="siiimpleToast",this.defaultStyle={position:"fixed",padding:"1rem 1.2rem",minWidth:"17rem",zIndex:"10",borderRadius:"2px",color:"white",fontWeight:300,whiteSpace:"nowrap",pointerEvents:"none",opacity:0,boxShadow:"0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23)",transform:"scale(0.5)",transition:"all 0.4s ease-out"},this.verticalStyle=this.setVerticalStyle()[this._settings.vertical],this.horizontalStyle=this.setHorizontalStyle()[this._settings.horizontal]}return _createClass(t,[{key:"setVerticalStyle",value:function(){return{top:{top:"-100px"},bottom:{bottom:"-100px"}}}},{key:"setHorizontalStyle",value:function(){return{left:{left:"1rem"},center:{left:"50%",transform:"translateX(-50%) scale(0.5)"},right:{right:"1rem"}}}},{key:"setMessageStyle",value:function(){return{default:"#323232",success:"#d93737",alert:"#8BC34A"}}},{key:"init",value:function(t,e){var n=this,a=document.querySelector("body"),o=document.createElement("div");o.className=this.defaultClass,o.innerHTML=e,_extends(o.style,this.defaultStyle,this.verticalStyle,this.horizontalStyle),o.style.backgroundColor=this.setMessageStyle()[t],a.insertBefore(o,a.firstChild);var i=0;setTimeout((function(){n.addAction(o)}),i+=100),setTimeout((function(){n.removeAction(o)}),i+=3e3),setTimeout((function(){n.removeDOM(o)}),i+=500)}},{key:"addAction",value:function(t){var e=document.getElementsByClassName(this.defaultClass),n=15;"center"==this._settings.horizontal?t.style.transform="translateX(-50%) scale(1)":t.style.transform="scale(1)",t.style.opacity=1;for(var a=0;a<e.length;a+=1){var o=e[a].offsetHeight;"bottom"==this._settings.vertical?e[a].style.bottom=n+"px":e[a].style.top=n+"px",n+=o+15}}},{key:"removeAction",value:function(t){var e=t.offsetWidth,n=t.getBoundingClientRect();"right"==this._settings.horizontal?t.style.right="-"+e+"px":t.style.left=n.left+e+"px",t.style.opacity=0}},{key:"removeDOM",value:function(t){t.parentNode.removeChild(t)}},{key:"message",value:function(t){this.init("default",t)}},{key:"alert",value:function(t){this.init("success",t)}},{key:"success",value:function(t){this.init("alert",t)}}]),t}(),vertical="top",horizontal="center",toast=new siiimpleToast;